<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Community Event Portal</title>
    <link rel="stylesheet" href="style.css"> 
</head>
<body>

    <header id="mainHeader">
        <div class="container">
            <h1>Community Events</h1>
            <button class="menu-button">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
    </header>

    <nav class="main-nav">
        <div class="container">
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#events">Events</a></li>
                <li><a href="#register-form">Register</a></li>
                <li><a href="#">Services</a></li>
                <li><a href="#feedback-form">Feedback</a></li>
                <li><a href="#contact">Contact</a></li>
                <li><a href="#">Login</a></li>
                <li><a href="#">Sign Up</a></li>
            </ul>
        </div>
    </nav>

    <main class="container">

        <div id="welcome-banner">
            <h2>Welcome Back, <span class="highlight">Logged-in User!</span></h2>
            <p>
                We're glad to see you again. Check out our <span class="highlight">special offer</span> for this month:
                <span style="color: red; font-weight: bold;">Get 20% off all premium event registrations!</span>
            </p>
        </div>

        <section id="video-invite">
            <h2>Watch Our Event Promo!</h2>
            <div class="video-wrapper">
                <iframe
                    src="https://www.youtube.com/embed/tKVSRWZI5yo?si=y6nLn-RIKWc-Xip3"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen
                    onload="displayVideoReadyMessage()"
                ></iframe>
            </div>
            <p id="videoStatus" class="status-message hidden">Video ready to play!</p>
        </section>

        <section id="find-events-section">
            <h2>Find Events</h2>
            <div class="search-form-wrapper">
                <input type="text" placeholder="Search events..." class="form-input">
                <select class="form-input">
                    <option value="">Select Location</option>
                    <option value="central">Central District</option>
                    <option value="north">Northside</option>
                    <option value="south">Southside</option>
                    <option value="east">East Borough</option>
                    <option value="west">West End</option>
                </select>
                <button class="action-button">Search</button>
            </div>
        </section>

        <section id="home">
            <h2 style="color: red;">Welcome to Your Community Portal!</h2>
            <p>
                This is the central hub for all local community events and services. Here you can find information about upcoming events, register your attendance, and access various city council services. We aim to make community engagement easy and accessible for everyone.
            </p>
            <p>
                Explore the navigation above to get started. We look forward to seeing you at our next event!
            </p>
        </section>

        <section id="geolocation-section">
            <h2>Find Nearby Events</h2>
            <p>Click the button below to find events near your current location.</p>
            <button onclick="findNearbyEvents()" class="action-button green responsive-auto-width">
                Find Nearby Events
            </button>
            <div id="locationStatus" class="location-status hidden">
                <p id="locationCoordinates"></p>
                <p id="locationError" class="error-message"></p>
            </div>
        </section>

        <section id="upcoming-events">
            <h2>Upcoming Events</h2>
            <div class="event-cards-grid">
                <div class="event-card">
                    <figure>
                        <img src="summer.img" alt="Summer Concert" title="Annual Summer Concert Series" class="image-border">
                        <figcaption>Summer Concert Series - Every Friday in July!</figcaption>
                    </figure>
                    <p>Enjoy live music under the stars. Family-friendly event.</p>
                    <a href="#" class="action-button">View Details</a>
                </div>

                <div class="event-card">
                    <figure>
                        <img src="foodtruck.img" alt="Food Truck Rally" title="Annual Food Truck Rally" class="image-border">
                        <figcaption>Food Truck Rally - Taste the best local eats.</figcaption>
                    </figure>
                    <p>A variety of food trucks, live entertainment, and fun activities.</p>
                    <a href="#" class="action-button">Explore Menus</a>
                </div>
            </div>
        </section>

        <section id="register-events">
            <h2>Register for Events</h2>
            <div class="event-cards-grid">
                <div class="event-card">
                    <figure>
                        <img src="workshop.img" alt="Workshop Sign-up" title="Register for Workshops" class="image-border">
                        <figcaption>Don't miss out! Register for our popular workshops.</figcaption>
                    </figure>
                    <p>Hands-on workshops for all skill levels. Limited spots available!</p>
                    <a href="#register-form" class="action-button">Sign Up Now</a>
                </div>

                <div class="event-card">
                    <figure>
                        <img src="volunteer.img" alt="Volunteer Drive" title="Volunteer Opportunity" class="image-border">
                        <figcaption>Make a difference in your community. Join our volunteer team.</figcaption>
                    </figure>
                    <p>Make a difference in your community. Join our volunteer team.</p>
                    <a href="#register-form" class="action-button">Become a Volunteer</a>
                </div>
            </div>
        </section>

        <section id="events">
            <h2>Past Event Highlights</h2>
            <table class="event-table">
                <tbody>
                    <tr>
                        <td>
                            <figure>
                                <img src="fair.img" alt="Community Fair" title="Annual Community Fair" class="image-border" ondblclick="enlargeImage(this)">
                                <figcaption>Annual Community Fair - Fun for all ages!</figcaption>
                            </figure>
                        </td>
                        <td>
                            <figure>
                                <img src="musicfest.img" alt="Music Festival" title="Summer Music Festival" class="image-border" ondblclick="enlargeImage(this)">
                                <figcaption>Summer Music Festival - Live bands and great vibes.</figcaption>
                            </figure>
                        </td>
                        <td>
                            <figure>
                                <img src="art.img" alt="Art Exhibition" title="Local Art Exhibition" class="small-event-image image-border" ondblclick="enlargeImage(this)">
                                <figcaption>Local Art Exhibition - Showcasing community talent.</figcaption>
                            </figure>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <figure>
                                <img src="marathon.img" alt="Community Marathon" title="Annual Charity Marathon" class="image-border" ondblclick="enlargeImage(this)">
                                <figcaption>Annual Charity Marathon - Running for a cause.</figcaption>
                            </figure>
                        </td>
                        <td>
                            <figure>
                                <img src="market.img" alt="Farmers Market" title="Weekly Farmers Market" class="image-border" ondblclick="enlargeImage(this)">
                                <figcaption>Weekly Farmers Market - Fresh produce and local goods.</figcaption>
                            </figure>
                        </td>
                        <td>
                            <figure>
                                <img src="tech_workshop.img" alt="Tech Workshop" title="Community Tech Workshop" class="small-event-image image-border" ondblclick="enlargeImage(this)">
                                <figcaption>Community Tech Workshop - Learning new skills together.</figcaption>
                            </figure>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="access-services">
            <h3>Access Services</h3>
            <p>Find information about various city council services.</p>
            <a href="#" class="action-button">Explore Services</a>
        </section>

        <section id="news-article-section">
            <h2>Community News Bulletin</h2>
            <div class="newspaper-layout">
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </p>
                <p>
                    Curabitur pretium tincidunt lacus. Nulla gravida orci a odio. Nullam varius, turpis et commodo pharetra, est eros bibendum elit, nec luctus magna felis sollicitudin mauris. Integer in mauris eu nibh euismod gravida. Duis ac tellus et risus auctor iaculis.
                </p>
                <p>
                    Proin dictum elementum velit. Fusce euismod consequat ante. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam in lorem sit amet leo accumsan lacinia. Ut sollicitudin elementum metus.
                </p>
                <p>
                    Donec at pede. Etiam vel quam. Nulla facilisi. Aenean feugiat. Sed ac lectus. Nulla facilisi. Ut in est.
                </p>
            </div>
        </section>

        <section id="register-form" class="form-container">
            <h2>Event Registration</h2>
            <form id="eventRegistrationForm">
                <div>
                    <label for="fullName">Full Name:</label>
                    <input type="text" id="fullName" name="fullName" placeholder="John Doe" required autofocus class="form-input">
                </div>
                <div>
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" placeholder="john.doe@example.com" required class="form-input">
                </div>
                <div>
                    <label for="eventDate">Preferred Event Date:</label>
                    <input type="date" id="eventDate" name="eventDate" required class="form-input">
                </div>
                <div>
                    <label for="eventType">Event Type:</label>
                    <select id="eventType" name="eventType" required class="form-input">
                        <option value="">Select an Event Type</option>
                        <option value="community_fair">Community Fair</option>
                        <option value="music_festival">Music Festival</option>
                        <option value="art_exhibition">Art Exhibition</option>
                        <option value="charity_marathon">Charity Marathon</option>
                        <option value="farmers_market">Farmers Market</option>
                        <option value="tech_workshop">Tech Workshop</option>
                    </select>
                </div>
                <div>
                    <label for="message">Message (optional):</label>
                    <textarea id="message" name="message" rows="4" placeholder="Any special requests or comments?" class="form-input"></textarea>
                </div>
                <button type="submit" class="action-button">Register for Event</button>
            </form>
            <div id="registrationConfirmation" class="form-confirmation hidden">
                Thank you for registering! Your registration has been received.
            </div>
        </section>

        <section id="feedback-form" class="form-container">
            <h2>Event Feedback</h2>
            <form>
                <div>
                    <label for="phoneNumber">Phone Number:</label>
                    <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="e.g., 123-456-7890" class="form-input" onblur="validatePhoneNumber()">
                    <p id="phoneError" class="error-message hidden">Please enter a valid phone number (e.g., 123-456-7890).</p>
                </div>
                <div>
                    <label for="feedbackEventType">Select Event for Feedback:</label>
                    <select id="feedbackEventType" name="feedbackEventType" class="form-input" onchange="displayEventFee()">
                        <option value="">Select an Event</option>
                        <option value="community_fair">Community Fair ($10)</option>
                        <option value="music_festival">Music Festival ($25)</option>
                        <option value="art_exhibition">Art Exhibition (Free)</option>
                        <option value="charity_marathon">Charity Marathon ($15)</option>
                        <option value="farmers_market">Farmers Market (Free)</option>
                        <option value="tech_workshop">Tech Workshop ($50)</option>
                    </select>
                    <p id="eventFeeDisplay" class="event-fee-display hidden"></p>
                </div>
                <div>
                    <label for="feedbackMessage">Your Feedback:</label>
                    <textarea id="feedbackMessage" name="feedbackMessage" rows="5" placeholder="Share your thoughts about the event..." class="form-input" onkeyup="countCharacters(this, 'charCount')"></textarea>
                    <p id="charCount" class="char-count">0 characters</p>
                </div>
                <button type="button" onclick="showFeedbackConfirmation()" class="action-button">Submit Feedback</button>
            </form>
        </section>

        <section id="preferences-section">
            <h2>User Preferences</h2>
            <p>
                Your preferred event type is saved locally in your browser.
            </p>
            <button onclick="clearPreferences()" class="action-button red responsive-auto-width">
                Clear All Preferences
            </button>
            <div id="preferencesClearedMessage" class="preferences-cleared-message hidden">
                All saved preferences have been cleared.
            </div>
        </section>

        <section id="contact">
            <h2>Contact Us</h2>
            <p>
                Have questions or feedback? Feel free to reach out to us using the information below.
            </p>
            <address>
                <p><strong>Local City Council</strong></p>
                <p>123 Community Lane</p>
                <p>Civicville, CA 90210</p>
                <p>Email: <a href="mailto:jayaganeshkeerthana@gmail.com">info@community.org</a></p>
                <p>Phone: <a href="tel:+15551234567">(555) 123-4567</a></p>
            </address>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container">
            <p>© 2025 Local City Council. All rights reserved.</p>
            <p class="footer-links">
                <a href="#">Privacy Policy</a> |
                <a href="#">Terms of Service</a> |
                <a href="help.html" target="_blank">Help & Support</a>
            </p>
        </div>
    </footer>

    <div id="confirmationModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('confirmationModal')">×</span>
            <h3>Submission Confirmed!</h3>
            <p id="confirmationMessage"></p>
            <button onclick="closeModal('confirmationModal')">OK</button>
        </div>
    </div>

    <div id="imageModal" class="modal">
        <div id="image-modal-content">
            <span class="close-button" onclick="closeModal('imageModal')">×</span>
            <img id="enlarged-image" src="" alt="Enlarged Image">
        </div>
    </div>

    <script>
        let formHasChanges = false;

        const eventRegistrationForm = document.getElementById('eventRegistrationForm');
        const eventTypeSelect = document.getElementById('eventType');
        const registrationConfirmationDiv = document.getElementById('registrationConfirmation');

        eventRegistrationForm.addEventListener('input', () => { formHasChanges = true; });
        eventTypeSelect.addEventListener('change', function() { localStorage.setItem('preferredEventType', this.value); });

        eventRegistrationForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const fullName = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            const eventDate = document.getElementById('eventDate').value;
            const eventType = eventTypeSelect.value;

            registrationConfirmationDiv.innerHTML = `Thank you, <span class="font-bold">${fullName}</span>, for registering for the <span class="font-bold">${eventType.replace(/_/g, ' ')}</span> on <span class="font-bold">${eventDate}</span>! Your registration has been received.`;
            registrationConfirmationDiv.classList.remove('hidden');
            this.reset();
            formHasChanges = false;
        });

        function validatePhoneNumber() {
            const phoneNumberInput = document.getElementById('phoneNumber');
            const phoneError = document.getElementById('phoneError');
            const phonePattern = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
            if (phoneNumberInput.value === "" || phonePattern.test(phoneNumberInput.value)) {
                phoneError.classList.add('hidden');
                phoneNumberInput.classList.remove('border-red-500');
            } else {
                phoneError.classList.remove('hidden');
                phoneNumberInput.classList.add('border-red-500');
            }
        }

        function displayEventFee() {
            const feedbackEventType = document.getElementById('feedbackEventType');
            const eventFeeDisplay = document.getElementById('eventFeeDisplay');
            const selectedOption = feedbackEventType.options[feedbackEventType.selectedIndex];
            const eventText = selectedOption.textContent;

            if (selectedOption.value === "") {
                eventFeeDisplay.classList.add('hidden');
            } else {
                const feeMatch = eventText.match(/\(\$([0-9.]+)\)/);
                const freeMatch = eventText.match(/\(Free\)/);
                if (feeMatch) {
                    eventFeeDisplay.textContent = `Event Fee: $${feeMatch[1]}`;
                } else if (freeMatch) {
                    eventFeeDisplay.textContent = `Event Fee: Free`;
                } else {
                    eventFeeDisplay.textContent = `Event Fee: Not specified`;
                }
                eventFeeDisplay.classList.remove('hidden');
            }
        }

        function showFeedbackConfirmation() {
            const feedbackMessage = document.getElementById('feedbackMessage').value;
            const feedbackEventType = document.getElementById('feedbackEventType').value;
            const confirmationModal = document.getElementById('confirmationModal');
            const confirmationMessage = document.getElementById('confirmationMessage');

            if (feedbackEventType === "") {
                confirmationMessage.textContent = "Please select an event type for your feedback.";
            } else if (feedbackMessage.trim() === "") {
                confirmationMessage.textContent = "Please enter your feedback message.";
            } else {
                confirmationMessage.textContent = `Thank you for your feedback on the ${feedbackEventType.replace(/_/g, ' ')}! We appreciate your input.`;
                document.querySelector('#feedback-form form').reset();
                document.getElementById('charCount').textContent = '0 characters';
                document.getElementById('eventFeeDisplay').classList.add('hidden');
                document.getElementById('phoneError').classList.add('hidden');
                document.getElementById('phoneNumber').classList.remove('border-red-500');
            }
            confirmationModal.style.display = 'flex';
        }

        function enlargeImage(imgElement) {
            const imageModal = document.getElementById('imageModal');
            const enlargedImage = document.getElementById('enlarged-image');
            enlargedImage.src = imgElement.src;
            enlargedImage.alt = imgElement.alt;
            imageModal.style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function countCharacters(textareaElement, countElementId) {
            const charCountElement = document.getElementById(countElementId);
            charCountElement.textContent = `${textareaElement.value.length} characters`;
        }

        function displayVideoReadyMessage() {
            document.getElementById('videoStatus').classList.remove('hidden');
        }

        window.addEventListener('beforeunload', function(event) {
            const formInputs = eventRegistrationForm.querySelectorAll('input, select, textarea');
            let hasInput = false;
            for (let i = 0; i < formInputs.length; i++) {
                if (formInputs[i].value.trim() !== '') {
                    hasInput = true;
                    break;
                }
            }
            if (hasInput && registrationConfirmationDiv.classList.contains('hidden')) {
                event.preventDefault();
                event.returnValue = '';
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            const savedEventType = localStorage.getItem('preferredEventType');
            if (savedEventType) {
                eventTypeSelect.value = savedEventType;
            }
        });

        function clearPreferences() {
            localStorage.clear();
            sessionStorage.clear();
            const preferencesClearedMessage = document.getElementById('preferencesClearedMessage');
            preferencesClearedMessage.classList.remove('hidden');
            setTimeout(() => { preferencesClearedMessage.classList.add('hidden'); }, 3000);
            eventTypeSelect.value = "";
        }

        function findNearbyEvents() {
            const locationStatusDiv = document.getElementById('locationStatus');
            const locationCoordinatesP = document.getElementById('locationCoordinates');
            const locationErrorP = document.getElementById('locationError');

            locationStatusDiv.classList.remove('hidden');
            locationCoordinatesP.textContent = 'Locating...';
            locationErrorP.textContent = '';

            if (navigator.geolocation) {
                const options = { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 };
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const latitude = position.coords.latitude;
                        const longitude = position.coords.longitude;
                        locationCoordinatesP.textContent = `Latitude: ${latitude.toFixed(6)}, Longitude: ${longitude.toFixed(6)}`;
                        locationErrorP.textContent = '';
                    },
                    (error) => {
                        let errorMessage = 'Error getting location: ';
                        switch(error.code) {
                            case error.PERMISSION_DENIED: errorMessage += "User denied the request for Geolocation."; break;
                            case error.POSITION_UNAVAILABLE: errorMessage += "Location information is unavailable."; break;
                            case error.TIMEOUT: errorMessage += "The request to get user location timed out."; break;
                            case error.UNKNOWN_ERROR: errorMessage += "An unknown error occurred."; break;
                        }
                        locationCoordinatesP.textContent = '';
                        locationErrorP.textContent = errorMessage;
                    },
                    options
                );
            } else {
                locationCoordinatesP.textContent = '';
                locationErrorP.textContent = "Geolocation is not supported by this browser.";
            }
        }
    </script>

</body>
</html>
